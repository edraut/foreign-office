<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Foreign-office by edraut</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/">Foreign-office</a></h1>
        <p>A light browser push framework that provides functionality for listeners on web clients and publishers on Rails servers. Keep your business logic on the server whenever you can!</p>
        <p class="view"><a href="https://github.com/edraut/foreign-office">View the Project on GitHub <small>edraut/foreign-office</small></a></p>
        <ul>
          <li><a href="https://github.com/edraut/foreign-office/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/edraut/foreign-office/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/edraut/foreign-office">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>want to wrap the http call to the bus?</h2>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby">ForeignOffice.config(
  bus: {
    ...your bus configurationi here...
    }),
  publish_method: -&gt;(message){
    MyInstrumenter do
      ForeignOffice.publish! channel: &#39;exclamations_to_everyone&#39;, object: {shout_out: &#39;Hello world!&#39;}
    end
  })
</code></pre></div>
<p>You can run any code you like here, but you must eventually call ForeignOffice.publish! with the same hash containing channel and object keys as usual.
This is good if you want to:</p>

<ul>
<li>send publish requests in a background worker (e.g. your worker system has significantly lower latency than your push bus because it&#39;s on the same local network)</li>
<li>instrument publish requests with some special custom logging</li>
<li>post every message you publish to Facebook (well, someone will want to, casting all good judgement to the wind)</li>
</ul>

      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/edraut">edraut</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>